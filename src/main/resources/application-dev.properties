# ================================
# CONFIGURACI√ìN DE DESARROLLO
# ================================

# Database Connection - DESDE .env
spring.datasource.url=${spring.datasource.url:jdbc:postgresql://localhost:5432/urdimbre}
spring.datasource.username=${spring.datasource.username:postgres}
spring.datasource.password=${spring.datasource.password:}

# JPA/Hibernate
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.properties.hibernate.format_sql=true

# JWT - DESDE .env CON FALLBACK
jwt.secret=${jwt.secret:a1b2c3d4e5f67890abcdef1234567890fedcba0987654321abcdef1234567890fedcba0987654321abcdef1234567890fedcba0987654321abcdef1234567890}
jwt.access-token-expiration=${jwt.access-token-expiration:86400000}
jwt.refresh-token-expiration=${jwt.refresh-token-expiration:604800000}

# Admin config - DESDE .env CON FALLBACK
admin.username=${admin.username:admin}
admin.email=${admin.email:admin@urdimbre.com}
admin.password=${admin.password:AdminUrdimbre2025!@#$}

server.port=8080

# Logging para desarrollo
logging.level.org.springframework.security=DEBUG
logging.level.com.urdimbre=DEBUG
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE
logging.level.org.springframework.web=DEBUG
logging.level.org.springframework.web.servlet.mvc.method.annotation=DEBUG
logging.level.org.springframework.web.servlet.handler=DEBUG
logging.level.org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerMapping=DEBUG
logging.level.org.springframework.web.servlet=DEBUG

# ‚úÖ LOGGING ESPEC√çFICO PARA RATE LIMITING
logging.level.com.urdimbre.urdimbre.security.service.RateLimitingService=INFO

# Actuator para monitoreo
management.endpoints.web.exposure.include=health,info
management.endpoint.health.show-details=always

# ================================
# ‚úÖ RATE LIMITING - DESDE SYSTEM PROPERTIES (.env)
# ================================

# üìù REGISTRO RATE LIMITING - DESDE .env CON FALLBACK PERMISIVO
rate-limit.register.ip.capacity=${rate-limit.register.ip.capacity:100}
rate-limit.register.ip.refill-duration=${rate-limit.register.ip.refill-duration:PT30S}

# üîë LOGIN RATE LIMITING - DESDE .env CON FALLBACK PERMISIVO  
rate-limit.login.ip.capacity=${rate-limit.login.ip.capacity:100}
rate-limit.login.ip.refill-duration=${rate-limit.login.ip.refill-duration:PT30S}

# üë§ LOGIN POR USUARIO - DESDE .env CON FALLBACK PERMISIVO
rate-limit.login.user.capacity=${rate-limit.login.user.capacity:50}
rate-limit.login.user.refill-duration=${rate-limit.login.user.refill-duration:PT30S}

# ================================
# ‚úÖ CACHE Y LIMPIEZA PARA DESARROLLO
# ================================
spring.cache.type=caffeine
spring.cache.caffeine.spec=maximumSize=1000,expireAfterAccess=300s

# ‚úÖ LIMPIEZA MUY FRECUENTE PARA DESARROLLO
rate-limit.cleanup.enabled=true
rate-limit.cleanup.interval=60000
blacklist.cleanup.interval=120000

# ‚úÖ TOKEN CLEANUP
token.cleanup.enabled=true
token.cleanup.interval=300000

# ================================
# ‚úÖ C√ìDIGOS DE INVITACI√ìN - DESDE .env
# ================================
invite.code.default=${invite.code.default:URDIMBRE2025}